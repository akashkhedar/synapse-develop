{% extends 'users/new-ui/user_base.html' %} 
{% block content %} {{ block.super }}
<script nonce="{{request.csp_nonce}}">
  gaClientIdTrackingIframe("users.login.view");
  // Give time for `synapse_gaclient_id` to be set
  setTimeout(() => {
    const synapse_gaclient_id = sessionStorage.getItem("synapse_gaclient_id");
    __synapsea("users.login.view", { synapse_gaclient_id });
  }, 2000);
</script>
{% endblock %} 
{% block user_content %}
<div class="form-wrapper">
  <h2>Log In</h2>
  <form
    id="login-form"
    action="{% url 'user-login' %}?next={{ next }}"
    method="post"
  >
    {% csrf_token %}
    <div class="input-wrapper">
      <label for="email">Email Address</label>
      <input
        type="text"
        class="sf-input-ls"
        name="email"
        id="email"
        value="{{ form.data.email }}"
        placeholder="you@example.com"
      />
    </div>
    <div class="input-wrapper">
      <label for="password">Password</label>
      <input
        type="password"
        class="sf-input-ls"
        name="password"
        id="password"
        placeholder="Enter your password"
      />
    </div>
    {% if form.non_field_errors %} 
      {% for error in form.non_field_errors %}
        <p class="error">{{ error }}</p>
      {% endfor %} 
    {% endif %}
    <div class="form-group">
      <input
        type="checkbox"
        id="persist_session"
        name="persist_session"
        class="sf-checkbox-ls"
        checked="checked"
      />
      <label for="persist_session">Keep me logged in this browser</label>
    </div>
    <button type="submit" aria-label="Log In" class="login-button">
      Log in
    </button>
  </form>
</div>
{% if not settings.DISABLE_SIGNUP_WITHOUT_LINK %}
<div class="text-wrapper">
  <p>Don't have an account?</p>
  <a href="{% url 'user-signup' %}{% querystring %}">Sign up</a>
</div>
{% endif %} 
{% if messages %} 
{% for message in messages %} 
{% if message.tags == 'success' %}
<div
  id="signupModal"
  style="
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 9999;
  "
>
  <div
    style="
      background: white;
      padding: 30px;
      border-radius: 8px;
      max-width: 500px;
      text-align: center;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    "
  >
    <h3 style="margin-bottom: 15px; color: #333">
      âœ“ Account Created Successfully!
    </h3>
    <p style="margin-bottom: 20px; color: #666">{{ message }}</p>
    <button
      onclick="this.closest('#signupModal').style.display='none'"
      class="sf-button-ls sf-button-ls_look_primary"
    >
      Close
    </button>
  </div>
</div>
{% endif %} 
{% endfor %} 
{% endif %} 
{% endblock %}
