{% extends 'users/new-ui/user_base.html' %}

{% block content %}
{{ block.super }}
<script nonce="{{request.csp_nonce}}">
  gaClientIdTrackingIframe("users.login.view");
  setTimeout(() => {
    const synapse_gaclient_id = sessionStorage.getItem("synapse_gaclient_id");
    __synapsea("users.login.view", { synapse_gaclient_id });
  }, 2000);
</script>
{% endblock %}

{% block user_content %}
<div class="auth-form-container">
  <h2>Welcome</h2>
  <p class="subtitle">Log in to Synapse to continue to your workspace.</p>
  
  <form class="auth-form" action="{% url 'user-login' %}?next={{ next }}" method="post">
    {% csrf_token %}
    <div class="form-field">
      <label for="email">Email address *</label>
      <input type="text" name="email" id="email" value="{{ form.data.email }}" placeholder="you@example.com" required>
    </div>
    <div class="form-field">
      <label for="password">Password *</label>
      <input type="password" name="password" id="password" placeholder="Enter your password" required>
    </div>
    {% if form.non_field_errors %}
      {% for error in form.non_field_errors %}
        <p class="error-message">{{ error }}</p>
      {% endfor %}
    {% endif %}
    <button type="submit" class="auth-submit-btn">Continue</button>
  </form>
  
  <p class="auth-bottom-link">Don't have an account? <a href="{% url 'user-signup' %}{% querystring %}">Sign up</a></p>
  
</div>

{% if messages %}
  {% for message in messages %}
    {% if message.tags == 'success' %}
    <div id="signupModal" style="position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.5);display:flex;align-items:center;justify-content:center;z-index:9999;">
      <div style="background:white;padding:30px;border-radius:8px;max-width:500px;text-align:center;box-shadow:0 4px 6px rgba(0,0,0,0.1);">
        <h3 style="margin-bottom:15px;color:#333">âœ“ Account Created Successfully!</h3>
        <p style="margin-bottom:20px;color:#666">{{ message }}</p>
        <button onclick="this.closest('#signupModal').style.display='none'" style="background:#1a1a2e;color:#fff;border:none;padding:10px 20px;border-radius:6px;cursor:pointer;">Close</button>
      </div>
    </div>
    {% endif %}
  {% endfor %}
{% endif %}
{% endblock %}
