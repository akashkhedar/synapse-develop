{% extends 'users/new-ui/user_base.html' %} {% block content %} {{ block.super
}}
<script nonce="{{request.csp_nonce}}">
  gaClientIdTrackingIframe("users.login.view");
  setTimeout(() => {
    const synapse_gaclient_id = sessionStorage.getItem("synapse_gaclient_id");
    if (window.__lsa) __lsa("users.login.view", { synapse_gaclient_id });
  }, 2000);
</script>
{% endblock %} {% block user_content %}
<div class="auth-form-container">
  <!-- Section Label - matching FeaturesSection number style -->
  <div class="auth-section-label">
    <span>01/</span>
  </div>

  <h2>Welcome back</h2>
  <p class="subtitle">Sign in to continue to your workspace.</p>

  <form
    class="auth-form"
    action="{% url 'user-login' %}?next={{ next }}"
    method="post"
  >
    {% csrf_token %}
    <div class="form-field">
      <label for="email">Email</label>
      <input
        type="text"
        name="email"
        id="email"
        value="{{ form.data.email }}"
        placeholder="you@example.com"
        required
        autocomplete="email"
      />
    </div>
    <div class="form-field">
      <label for="password">Password</label>
      <input
        type="password"
        name="password"
        id="password"
        placeholder="Enter your password"
        required
        autocomplete="current-password"
      />
    </div>
    {% if form.non_field_errors %} {% for error in form.non_field_errors %}
    <p class="error-message">{{ error }}</p>
    {% endfor %} {% if annotator_action == 'resend_verification' %}
    <div class="annotator-action-container">
      <p class="annotator-action-hint">
        Didn't receive the email? Check your spam folder or request a new link.
      </p>
      <a href="{% url 'resend-verification' %}" class="annotator-action-btn">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="16"
          height="16"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <path
            d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"
          ></path>
          <polyline points="22,6 12,13 2,6"></polyline>
        </svg>
        Resend Verification Email
      </a>
    </div>
    {% endif %} {% endif %}
    <button type="submit" class="auth-submit-btn">
      LOG IN
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="16"
        height="16"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <path d="M5 12h14"></path>
        <path d="m12 5 7 7-7 7"></path>
      </svg>
    </button>
  </form>

  <p class="auth-bottom-link">
    Don't have an account?
    <a href="{% url 'user-signup' %}{% querystring %}">Get started</a>
  </p>
</div>

{% if messages %} {% for message in messages %} {% if message.tags == 'success'
%}
<style nonce="{{request.csp_nonce}}">
  .success-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.9);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 9999;
  }
  .success-modal-content {
    background: #111;
    border: 1px solid #1f1f1f;
    padding: 48px;
    max-width: 420px;
    text-align: center;
  }
  .success-icon {
    width: 56px;
    height: 56px;
    background: rgba(34, 197, 94, 0.15);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 24px;
  }
  .success-icon svg {
    width: 28px;
    height: 28px;
    color: #22c55e;
  }
  .success-modal h3 {
    color: #fff;
    font-size: 24px;
    font-weight: 600;
    margin-bottom: 12px;
    letter-spacing: -0.02em;
  }
  .success-modal p {
    color: #6b7280;
    font-size: 14px;
    line-height: 1.6;
    margin-bottom: 28px;
    font-family: monospace;
  }
  .success-modal button {
    background: #e8e4d9;
    color: #000;
    border: none;
    padding: 16px 32px;
    font-size: 13px;
    font-weight: 600;
    cursor: pointer;
    text-transform: uppercase;
    letter-spacing: 0.15em;
    transition: background 0.2s;
  }
  .success-modal button:hover {
    background: #d8d4c9;
  }
</style>
<div class="success-modal" id="successModal">
  <div class="success-modal-content">
    <div class="success-icon">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 24 24"
        fill="currentColor"
      >
        <path
          fill-rule="evenodd"
          d="M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z"
          clip-rule="evenodd"
        />
      </svg>
    </div>
    <h3>Account Created</h3>
    <p>{{ message }}</p>
    <button
      onclick="document.getElementById('successModal').style.display='none'"
    >
      Continue
    </button>
  </div>
</div>
{% endif %} {% endfor %} {% endif %} {% endblock %}
